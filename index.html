<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DLCF EKITI NYSC Biodata Form</title>
<style>
/* ===== BODY & FONT ===== */
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background: linear-gradient(120deg, #f0f4f7, #e0e7ff);
  margin: 0;
  padding: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

/* ===== CARD CONTAINER ===== */
.form-card {
  background-color: #fff;
  width: 100%;
  max-width: 550px;
  border-radius: 16px;
  box-shadow: 0 12px 30px rgba(0,0,0,0.15);
  padding: 35px 40px;
  box-sizing: border-box;
  animation: fadeIn 0.6s ease-in-out;
}

/* ===== HEADINGS ===== */
h2 {
  text-align: center;
  color: #1a73e8;
  margin-bottom: 25px;
}

/* ===== LABELS ===== */
label {
  font-weight: 600;
  margin-bottom: 6px;
  display: block;
  color: #333;
}

/* ===== INPUTS & SELECTS ===== */
input, select, button {
  width: 100%;
  padding: 12px 14px;
  margin-bottom: 18px;
  border-radius: 10px;
  border: 1px solid #ccc;
  font-size: 16px;
  box-sizing: border-box;
  transition: all 0.3s;
}

input:focus, select:focus {
  border-color: #1a73e8;
  box-shadow: 0 0 6px rgba(26,115,232,0.3);
  outline: none;
}

/* ===== BUTTON ===== */
button {
  background-color: #1a73e8;
  color: #fff;
  font-weight: 700;
  border: none;
  cursor: pointer;
  transition: 0.3s;
  position: relative;
}

button:hover {
  background-color: #1558b0;
  transform: translateY(-2px);
}

/* Spinner inside button */
button .spinner {
  display: inline-block;
  width: 16px;
  height: 16px;
  border: 2px solid #fff;
  border-top: 2px solid transparent;
  border-radius: 50%;
  margin-left: 8px;
  vertical-align: middle;
  animation: spin 0.8s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* ===== THANK YOU MESSAGE ===== */
#thankYouContainer {
  text-align: center;
  color: #1a73e8;
  font-size: 18px;
  display: none;
}

/* ===== HIDDEN OTHER STATE ===== */
#otherState {
  display: none;
}

/* ===== ANIMATIONS ===== */
@keyframes fadeIn {
  from {opacity: 0; transform: translateY(10px);}
  to {opacity: 1; transform: translateY(0);}
}

/* ===== RESPONSIVE ===== */
@media(max-width: 600px){
  .form-card {
    padding: 25px 20px;
    border-radius: 12px;
  }
}
</style>
</head>
<body>

<!-- ===== FORM CARD ===== -->
<div class="form-card" id="formContainer">
  <h2>DLCF EKITI NYSC BIODATA FORM</h2>
  <form id="myForm">

    <label for="firstname">First Name</label>
    <input type="text" name="firstname" id="firstname" placeholder="Enter First Name" required>

    <label for="lastname">Last Name</label>
    <input type="text" name="lastname" id="lastname" placeholder="Enter Last Name" required>

    <label for="phone">Phone Number</label>
    <input type="tel" name="phone" id="phone" placeholder="Enter Phone Number" required title="Enter a valid phone number">

    <label for="gender">Gender</label>
    <select name="gender" id="gender" required>
      <option value="">Select Gender</option>
      <option value="Male">Male</option>
      <option value="Female">Female</option>
    </select>

    <label for="stateSelect">State Posted</label>
    <select name="state" id="stateSelect" required onchange="toggleOtherState()">
      <option value="">Select State</option>
      <option value="Ekiti State">Ekiti State</option>
      <option value="Lagos State">Lagos State</option>
      <option value="Osun State">Osun State</option>
      <option value="Other">Other</option>
    </select>
    <input type="text" id="otherState" placeholder="Enter State Name">

    <label for="year">Service Year</label>
    <select name="year" id="year" required>
      <option value="">Select Year</option>
    </select>

    <label for="stream">Stream</label>
    <select name="stream" id="stream" required>
      <option value="">Select Stream</option>
      <option value="A1">A1</option>
      <option value="A2">A2</option>
      <option value="B1">B1</option>
      <option value="B2">B2</option>
      <option value="C1">C1</option>
      <option value="C2">C2</option>
    </select>

    <button type="submit">Submit</button>
  </form>
</div>

<!-- ===== THANK YOU CARD ===== -->
<div class="form-card" id="thankYouContainer">
  <h2>Submission Complete!</h2>
  <p>Thank you for submitting your information. Your details have been recorded successfully.</p>
</div>

<script>
// ===== SHOW/HIDE OTHER STATE =====
function toggleOtherState() {
  const stateSelect = document.getElementById("stateSelect");
  const otherState = document.getElementById("otherState");
  if(stateSelect.value === "Other") {
    otherState.style.display = "block";
    otherState.focus();
  } else {
    otherState.style.display = "none";
    otherState.value = "";
  }
}

// ===== DYNAMIC SERVICE YEAR =====
(function populateYears() {
  const yearSelect = document.getElementById("year");
  const currentYear = new Date().getFullYear();
  const previousYear = currentYear - 1;

  const prevOption = document.createElement("option");
  prevOption.value = previousYear;
  prevOption.text = previousYear;
  yearSelect.add(prevOption);

  const currOption = document.createElement("option");
  currOption.value = currentYear;
  currOption.text = currentYear;
  yearSelect.add(currOption);
})();

// ===== FORM SUBMISSION =====
document.getElementById("myForm").addEventListener("submit", function(e){
  e.preventDefault();

  let stateValue = this.state.value;

  // Require input if "Other" is selected
  if(stateValue === "Other") {
    const otherInput = document.getElementById("otherState").value.trim();
    if(!otherInput) {
      alert("Please enter your state name.");
      document.getElementById("otherState").focus();
      return;
    }
    stateValue = otherInput;
  }

  // ===== PHONE VALIDATION =====
  const phone = this.phone.value.trim();
  const phoneRegex = /^0[7-9][01][0-9]{8}$/;
  if(!phoneRegex.test(phone)) {
    alert("Invalid phone number. Must start with 0, followed by 7,8,or 9, then 0 or 1, then 8 digits.");
    this.phone.focus();
    return;
  }

  // ===== SHOW LOADING ANIMATION =====
  const submitButton = this.querySelector("button");
  submitButton.disabled = true;
  submitButton.innerHTML = 'Submitting <span class="spinner"></span>';

  const data = {
    firstname: this.firstname.value,
    lastname: this.lastname.value,
    phone: phone,
    gender: this.gender.value,
    state: stateValue,
    year: this.year.value,
    stream: this.stream.value
  };

  fetch("https://script.google.com/macros/s/AKfycbxKS-jhdCyVFiIylpdCAxzgRJ7n0KRIa1JceWVgx99HU0MeJwwESXZKrXhCRijk-nnA/exec", {
    method: "POST",
    body: JSON.stringify(data)
  })
  .then(res => res.json())
  .then(() => {
    document.getElementById("formContainer").style.display = "none";
    document.getElementById("thankYouContainer").style.display = "block";
  })
  .catch(() => {
    alert("Submission failed. Please try again.");
    submitButton.disabled = false;
    submitButton.textContent = "Submit";
  });
});
</script>

</body>
</html>
